<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - StockTracker</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- Header -->
    <header class="header dashboard-header">
        <div class="header-container">
            <div class="header-brand">
                <i data-lucide="bar-chart-3" class="header-icon"></i>
                <h1 class="header-title">StockTracker</h1>
                <div class="header-status" id="connectionStatus">
                    <div class="status-indicator" id="statusIndicator"></div>
                    <span id="lastUpdatedText">Connecting...</span>
                </div>
            </div>
            <div class="header-actions">
                <!-- Dark Mode Toggle -->
                <button class="btn btn-ghost btn-sm theme-toggle" id="themeToggle" onclick="toggleTheme()">
                    <i data-lucide="sun" class="theme-icon sun-icon"></i>
                    <i data-lucide="moon" class="theme-icon moon-icon"></i>
                </button>
                
                <!-- Auto Refresh Toggle -->
                <button class="btn btn-outline btn-sm" id="autoRefreshBtn" onclick="toggleAutoRefresh()">
                    <i data-lucide="refresh-cw" class="btn-icon" id="refreshIcon"></i>
                    <span id="autoRefreshText">Auto-refresh</span>
                </button>
                
                <!-- Home Button -->
                <button class="btn btn-ghost btn-sm" onclick="goToHomepage()">
                    <i data-lucide="home" class="btn-icon"></i>
                    Home
                </button>
                
                <!-- Search -->
                <div class="search-container">
                    <input type="text" class="search-input" placeholder="    Search stocks..." id="searchInput">
                    <div class="search-results" id="searchResults"></div>
                </div>
            </div>
        </div>
    </header>

    <div class="dashboard-layout">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-content">

                <!-- Stock List -->
                <div class="sidebar-section">
                    <h3 class="sidebar-title">Famous Stocks</h3>
                    <div class="stock-list" id="stockList">
                        <div class="loading-container">
                            <div class="loading-spinner"></div>
                            <span>Loading stocks...</span>
                        </div>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Tabs -->
            <div class="tabs">
                <div class="tab-list">
                    <button class="tab-button active" data-tab="overview" onclick="switchTab('overview')">Overview</button>
                    <button class="tab-button" data-tab="watchlist" onclick="switchTab('watchlist')">Watchlist</button>
                    <button class="tab-button" data-tab="news" onclick="switchTab('news')">News</button>
                </div>

                <!-- Overview Tab -->
                <div class="tab-content active" id="overview">
                    <!-- Selected Stock Details -->
                    <div class="card stock-details" id="stockDetailsCard">
                        <div class="stock-details-loading">
                            <div class="loading-spinner"></div>
                            <span>Select a stock to view details</span>
                        </div>
                    </div>

                    <!-- Company Information -->
                    <div class="card" id="companyInfoCard" style="display: none;">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i data-lucide="building-2" class="card-icon"></i>
                                Company Information
                            </h3>
                        </div>
                        <div class="card-content" id="companyInfo">
                            <!-- Company info will be populated by JavaScript -->
                        </div>
                    </div>
                </div>

                <!-- Watchlist Tab -->
                <div class="tab-content" id="watchlist">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">My Watchlist</h3>
                            <button class="btn btn-outline btn-sm" onclick="clearWatchlist()">
                                Clear All
                            </button>
                        </div>
                        <div class="card-content">
                            <div class="watchlist-content" id="watchlistContent">
                                <div class="watchlist-empty">
                                    <i data-lucide="star" class="empty-icon"></i>
                                    <p>Your watchlist is empty</p>
                                    <small>Add stocks by clicking the star icon</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- News Tab -->
                <div class="tab-content" id="news">
                    <div class="news-container">
                        <!-- News Filter -->
                        <div class="news-filter">
                            <button class="filter-btn active" data-filter="all" onclick="filterNews('all')">All News</button>
                            <button class="filter-btn" data-filter="international" onclick="filterNews('international')">International</button>
                            <button class="filter-btn" data-filter="indian" onclick="filterNews('indian')">Indian Markets</button>
                        </div>
                        
                        <!-- News Content -->
                        <div class="card">
                            <div class="card-header">
                                <div class="news-header">
                                    <i data-lucide="newspaper" class="news-icon"></i>
                                    <h3 class="card-title">Market News</h3>
                                </div>
                                <button class="btn btn-outline btn-sm" onclick="refreshNews()">
                                    <i data-lucide="refresh-cw" class="btn-icon"></i>
                                    Refresh
                                </button>
                            </div>
                            <div class="card-content">
                                <div class="news-list" id="newsList">
                                    <div class="news-loading">
                                        <div class="loading-spinner"></div>
                                        <span>Loading latest news...</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="script.js"></script>
</body>
</html>
